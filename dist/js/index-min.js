const toReadBtn=document.querySelector(".toggles__btn--to-read"),toReadContainer=document.querySelector(".to-read-container"),archiveBtn=document.querySelector(".toggles__btn--archive"),archiveContainer=document.querySelector(".archive-container"),togglesBtns=document.querySelectorAll(".toggles__btn");for(let t of togglesBtns)t.onclick=function(){for(let t of togglesBtns)t.classList.remove("toggles__btn--active");t.classList.add("toggles__btn--active"),toReadBtn.classList.contains("toggles__btn--active")&&(toReadContainer.classList.remove("invisible"),archiveContainer.classList.add("invisible")),archiveBtn.classList.contains("toggles__btn--active")&&(archiveContainer.classList.remove("invisible"),toReadContainer.classList.add("invisible"))};let toReadList=[];const toReadTable=function(){const t=document.querySelector(".books-container");let e="";for(let t=0;t<toReadList.length;t++)e+=`<div class='book' draggable='true' id='book${t+1}'>\n                <div class='book__drag-block'>\n                    <i class='book__drag-icon fas fa-grip-lines'></i>\n                </div>\n                <div class='book-description'>\n                    <h2 class='book-description__title'>${toReadList[t].name}</h2>\n                    <p class='book-description__text'>${toReadList[t].description}</p>\n                </div>\n                <button class='book__read-btn button' data-book-name='${toReadList[t].name}'>Прочитано</button>\n            </div>`;t.innerHTML=e,alreadyRead()},newBook=function(t,e){return{name:t,description:e}},addBtn=document.querySelector(".book-add__btn"),bookName=document.getElementById("book-add__name"),bookDescription=document.getElementById("book-add__description");addBtn.onclick=function(t){bookName.value.length>0&&bookDescription.value.length>0&&(t.preventDefault(),toReadList.push({name:bookName.value,description:bookDescription.value}),toReadTable(),bookName.value="",bookDescription.value="")};let archiveList=[];const alreadyRead=function(){const t=document.querySelectorAll(".book__read-btn");for(let e of t)e.onclick=function(t){t.preventDefault();const o=e.getAttribute("data-book-name");for(let t=0;t<toReadList.length;t++)o===toReadList[t].name&&(archiveList.push(toReadList[t]),toReadList.splice(t,1));toReadTable(),archiveTable()}},archiveTable=function(){const t=document.querySelector(".archive-books");let e="";if(0===archiveList.length){const e="<p><br>Пока что прочитанных книг нет</p>";t.innerHTML=e}else{for(let t of archiveList)e+=`<div class='book-description book-description--archive'>\n                    <h2 class='book-description__title'>${t.name}</h2>\n                    <p class='book-description__text'>${t.description}</p>\n                </div>`;t.innerHTML=e}};archiveTable();let isFirstDrop=!1;document.ondragstart=function(t){t.dataTransfer.setData("text/plain",t.target.id)},document.ondragenter=function(t){t.preventDefault();const e=document.querySelector(".books-container").firstElementChild,o=t.pageY<e.getBoundingClientRect().y,a=e===t.target;o&&a&&t.target.classList.contains("book")?(t.target.classList.add("book--drag-target-first"),isFirstDrop=!0):t.target.classList.contains("book")&&(t.target.classList.add("book--drag-target"),isFirstDrop=!1)},document.ondragleave=function(t){t.target.classList.remove("book--drag-target"),t.target.classList.remove("book--drag-target-first")},document.ondragover=function(t){t.target.classList.contains("book")&&t.preventDefault(),t.dataTransfer.dropEffect="copy"},document.ondrop=function(t){t.preventDefault(),t.target.classList.remove("book--drag-target"),t.target.classList.remove("book--drag-target-first");const e=t.dataTransfer.getData("text/plain"),o=document.getElementById(e);o.classList.add("drag-start"),o.classList.remove("drag-start"),isFirstDrop?(t.target.before(o),isFirstDrop=!1):t.target.after(o)};